# Qanary Framework

## Context

Many of the common tasks in Knowledge Graph Question Answering are already solved or have a typical solution. In this regard, to help developers [not to reinvent the wheel](https://dl.acm.org/doi/10.1145/3178876.3186023) -- frameworks come in to play (which is true not only for KGQA but for software engineering in general). There are several frameworks for Question Answering & Chatbots exist, in general, they can be divided in to two types -- low-code frameworks (e.g., [Dialogflow](https://cloud.google.com/dialogflow/docs), [Bot Framework](https://dev.botframework.com/)) and traditional frameworks (e.g., [Rasa](https://rasa.com/), [DeepPavlov](https://deeppavlov.ai/), [Qanary](https://github.com/WDAqua/Qanary)).
The aforementioned Qanary Framework stands out among the others because of the following reasons: 
* the framework helps you to facilitate KGQA system with multiple components;
* each component is implemented as a microservice and agnostic to programming language;
* the components interact with each other by writing and reading standartized RDF annotations from a common triplestore;
* a user of the framework may reuse components, developed and deployed by other users;
* the question answering process becomes transparent and interpretable because all the data generated by components is stored in a triplestore.

The Qanary framework has two major sub-systems: (1) [Qanary pipeline](https://webengineering.ins.hs-anhalt.de:43740/startquestionansweringwithtextquestion) and (2) [Qanary components](https://github.com/WDAqua/Qanary-question-answering-components). The first one serves a similar to [API gateway](https://docs.microsoft.com/en-us/azure/architecture/guide/architecture-styles/microservices) function which is to execute components with certain parameters in a certain order. The second sub-systems is actually a set of components that were developed and deployed by the users of framework.
One can reuse both of the ecosystems in order to implement his/her question answering system.

## Learning Objectives

* Learn how to integrate your QA components with the Qanary Framework;
* Learn how to use UI template to work with your QA system.

## Task

Integrate the Qanary Framework into your Simple Question Answering system developed in the [previous exercise](). Hence, each of your components has be to wrapped up according to the [example]() s.t., it becomes a Qanary component. Exclude API Gateway from your system, now [Qanary pipeline](https://webengineering.ins.hs-anhalt.de:43740/startquestionansweringwithtextquestion) will take care of calling the components. Use our [general chatbot frontend]() for testing your system.

### Transforming components to Qanary framework

The components register themselves in the [Qanary pipeline](https://webengineering.ins.hs-anhalt.de:43740/startquestionansweringwithtextquestion). To do this, the pipeline needs to "see" your components, so if you don't have external IP address of your PC, you probably need such tool as [ngrok](https://ngrok.com/download) to expose the corresponding ports to the internet.

1. Download and unpack [ngrok](https://ngrok.com/download);
1. Run `./ngrok http YOUR_PORT` in the directory of the ngrok (if you use Windows, check documentation of ngrok);
1. Use the [the example]() to implement and run your components (hint: please, add your surname to the component's name s.t. it is easy to find them);
1. Go to [Qanary Admin panel](http://webengineering.ins.hs-anhalt.de:43740) to see if your components are running:

1. If all the components are recognized, move to the next part.

### Asking questions with [Qanary pipeline](https://webengineering.ins.hs-anhalt.de:43740/startquestionansweringwithtextquestion)

1. Navigate to the [Qanary pipeline](https://webengineering.ins.hs-anhalt.de:43740/startquestionansweringwithtextquestion);
1. Select the components to be executed and adjust the order by dragging them;
1. Insert a textual question in the field and click "start Question Answering..."
1. If everything is good, then you will see the following output, it corresponds to the graph id, where all your execution annotations are stored:


### Using general chatbot frontend

1. Navigate to the [general chatbot frontend]()


## Submission check

In this exercise, **submission check will be performed in two steps**:

1. You send the code with your solution and the README with a description of files to Moodle (as usual). Then, I check it. If everything is OK, we move to the second step.
2. On the exercise, you perform a system demonstration.

After completion of these two steps, you pass the exercise.

## Guidance / Tutorials

* Qanary wiki: https://github.com/WDAqua/Qanary/wiki
* Qanary Admin panel: http://webengineering.ins.hs-anhalt.de:43740/#/applications
* Qanary Question Answering Components repository: https://github.com/WDAqua/Qanary-question-answering-components
* General chatbot frontend: 
* Create Qanary component using Java: https://github.com/WDAqua/Qanary/wiki/How-do-I-implement-a-new-Qanary-component-using-Java%3F
